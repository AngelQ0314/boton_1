<!-- ============================================ -->
<!-- HTML -->
<!-- ============================================ -->
<div class="container">

  <!-- HEADER -->
  <div class="header">
    <h1 class="header-title">Gesti√≥n de Per√≠odos</h1>
    <p class="header-subtitle">Visualiza y filtra los per√≠odos operativos</p>
  </div>

  <!-- BOT√ìN INICIAL -->
  <div *ngIf="!dataLoaded" class="initial-button-container">
    <button (click)="loadPeriods(true)" class="load-button">
    Cargar Per√≠odos
    </button>
  </div>

  <!-- FILTROS -->
  <div *ngIf="dataLoaded" class="filters-section">
    <h2 class="section-title">Filtros</h2>

    <!-- Filtros verticales -->
    <div class="filters-vertical">
      
      <div class="input-group">
        <label class="input-label">Cadena</label>
        <input
          type="text"
          [(ngModel)]="cdn_restaurant_name"
          (ngModelChange)="loadPeriods()"
          placeholder="Ej: KFC, Gus, etc."
          class="input-field"
        />
      </div>

      <div class="input-group">
        <label class="input-label">Restaurante</label>
        <input
          type="text"
          [(ngModel)]="restaurant_name"
          (ngModelChange)="loadPeriods()"
          placeholder="Ej: Gus G008"
          class="input-field"
        />
      </div>

      <div class="input-group">
        <label class="input-label">Estado</label>
        <select
          [(ngModel)]="status_name"
          (ngModelChange)="loadPeriods()"
          class="input-field"
        >
          <option value="all">Todos</option>
          <option value="Iniciado">Iniciado</option>
          <option value="Cerrado">Cerrado</option>
        </select>
      </div>

      <div class="input-group">
        <label class="input-label">Fechas</label>
        <select
          [(ngModel)]="dateFilter"
          (ngModelChange)="loadPeriods()"
          class="input-field"
        >
          <option value="all">Todos</option>
          <option value="today">Hoy</option>
          <option value="week">Esta semana</option>
          <option value="month">Este mes</option>
          <option value="custom">Personalizado</option>
        </select>
      </div>

      <div *ngIf="dateFilter === 'custom'" class="custom-dates">
        <div class="input-group">
          <label class="input-label">Fecha Inicio</label>
          <input type="date" [(ngModel)]="customStart" (change)="loadPeriods()" class="input-field">
        </div>
        <div class="input-group">
          <label class="input-label">Fecha Fin</label>
          <input type="date" [(ngModel)]="customEnd" (change)="loadPeriods()" class="input-field">
        </div>
      </div>

    </div>

    <!-- BOT√ìN LIMPIAR -->
    <button class="clear-button" (click)="clearFilters()">
      Limpiar filtros
    </button>
  </div>

  <!-- RESULTADOS -->
  <div *ngIf="dataLoaded" class="results-section">

    <div class="results-header">
      <h2 class="results-title">Resultados</h2>
      <span class="results-count">{{ periods.length }}</span>
    </div>

    <!-- CARGANDO -->
    <div *ngIf="loading" class="loading-state">
      <div class="loader"></div>
      <p class="loading-title">Cargando datos...</p>
      <p class="loading-subtitle">Por favor espera</p>
    </div>

    <!-- SIN RESULTADOS -->
    <div *ngIf="!loading && periods.length === 0" class="empty-state">
      <div class="empty-icon">üïµÔ∏è‚Äç‚ôÇÔ∏è</div>
      <p class="empty-text">No se encontraron resultados</p>
    </div>

    <!-- TARJETAS -->
    <div *ngIf="!loading && periods.length > 0" class="cards-grid">

      <div *ngFor="let p of periods" class="period-card">
        
        <div class="card-header">
          <div class="card-info">
            <h3 class="card-title">{{ p.restaurant_name }}</h3>
            <p class="card-chain">{{ p.cdn_restaurant_name }}</p>
          </div>

          <span
            class="status-badge"
            [ngClass]="{
              'badge-open': p.status_name === 'Iniciado',
              'badge-closed': p.status_name === 'Cerrado'
            }"
          >
            {{ p.status_name }}
          </span>
        </div>

        <div class="card-divider"></div>

        <div class="card-dates">
          <div class="date-item">
            <span class="date-label start">üìÖ Inicio</span>
            <span class="date-value">{{ formatDate(p.start_date) }}</span>
          </div>

          <div class="date-item">
            <span class="date-label end">‚è±Ô∏è Fin</span>
            <span class="date-value">{{ formatDate(p.final_date) }}</span>
          </div>
        </div>

      </div>
    </div>
  </div>

</div>