<div class="p-10 max-w-7xl mx-auto min-h-screen bg-gradient-to-br from-slate-900 via-blue-900 to-slate-900">

  <!-- HEADER -->
  <div class="text-center mb-14">
    <h1 class="text-5xl font-extrabold mb-4 text-white drop-shadow-lg tracking-wide">
      ğŸª GestiÃ³n de PerÃ­odos
    </h1>
    <p class="text-blue-200 text-lg font-light">
      Visualiza y filtra los perÃ­odos operativos de tus restaurantes
    </p>
  </div>

  <!-- BOTÃ“N INICIAL -->
  <div *ngIf="!dataLoaded" class="text-center mb-16">
    <button
      (click)="loadPeriods(true)"
      class="bg-gradient-to-r from-blue-500 via-blue-600 to-blue-700 text-white px-20 py-6 rounded-3xl text-2xl
      font-bold shadow-[0_10px_30px_rgba(0,0,0,0.25)] hover:scale-105 hover:shadow-[0_12px_35px_rgba(0,0,0,0.35)]
      transition-all duration-300"
    >
      ğŸ” Cargar PerÃ­odos
    </button>
  </div>

  <!-- FILTROS -->
  <div *ngIf="dataLoaded" class="bg-white/95 backdrop-blur-md p-10 shadow-2xl rounded-3xl mb-12 border border-blue-300">

    <h2 class="text-3xl font-bold mb-10 text-center text-gray-800 tracking-tight">
      ğŸ” Filtros Inteligentes
    </h2>

    <!-- GRID DE FILTROS -->
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8">
      
      <!-- Cadena -->
      <div class="filter-card">
        <label class="filter-label">Cadena</label>
        <input
          type="text"
          [(ngModel)]="cdn_restaurant_name"
          (ngModelChange)="loadPeriods()"
          placeholder="Ej: KFC, Gus, etc."
          class="filter-input"
        />
      </div>

      <!-- Restaurante -->
      <div class="filter-card">
        <label class="filter-label">Restaurante</label>
        <input
          type="text"
          [(ngModel)]="restaurant_name"
          (ngModelChange)="loadPeriods()"
          placeholder="Ej: Gus G008"
          class="filter-input"
        />
      </div>

      <!-- Estado -->
      <div class="filter-card">
        <label class="filter-label">Estado</label>
        <select
          [(ngModel)]="status_name"
          (ngModelChange)="loadPeriods()"
          class="filter-input bg-white"
        >
          <option value="all">Todos</option>
          <option value="Iniciado">Iniciado</option>
          <option value="Cerrado">Cerrado</option>
        </select>
      </div>

      <!-- Fecha -->
      <div class="filter-card">
        <label class="filter-label">Fechas</label>
        <select
          [(ngModel)]="dateFilter"
          (ngModelChange)="loadPeriods()"
          class="filter-input bg-white"
        >
          <option value="all">Todos</option>
          <option value="today">Hoy</option>
          <option value="week">Esta semana</option>
          <option value="month">Este mes</option>
          <option value="custom">Personalizado</option>
        </select>
      </div>

    </div>

    <!-- RANGO PERSONALIZADO -->
    <div *ngIf="dateFilter === 'custom'" class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-8">
      <div class="filter-card">
        <label class="filter-label">Fecha Inicio</label>
        <input type="date" [(ngModel)]="customStart" (change)="loadPeriods()" class="filter-input">
      </div>
      <div class="filter-card">
        <label class="filter-label">Fecha Fin</label>
        <input type="date" [(ngModel)]="customEnd" (change)="loadPeriods()" class="filter-input">
      </div>
    </div>

    <!-- BOTÃ“N LIMPIAR -->
    <div class="text-center">
      <button
        class="bg-gradient-to-r from-red-500 to-red-600 hover:from-red-600 hover:to-red-700 text-white px-10 py-3
        rounded-xl font-semibold transition hover:scale-105 shadow-xl"
        (click)="clearFilters()"
      >
        ğŸ”„ Limpiar filtros
      </button>
    </div>
  </div>

  <!-- RESULTADOS -->
  <div *ngIf="dataLoaded" class="bg-white/95 p-10 shadow-2xl rounded-3xl border border-blue-200">

    <h2 class="text-3xl font-bold mb-8 text-gray-800">ğŸ“‹ Resultados ({{ periods.length }})</h2>

    <!-- CARGANDO -->
    <div *ngIf="loading" class="loading-container">
      <div class="loader"></div>
      <p class="loading-title">Cargando datos...</p>
      <p class="loading-sub">Por favor espera</p>
    </div>

    <!-- SIN RESULTADOS -->
    <div *ngIf="!loading && periods.length === 0" class="no-results">
      ğŸ•µï¸â€â™‚ï¸ No se encontraron resultados
    </div>

    <!-- TARJETAS -->
    <div *ngIf="!loading && periods.length > 0" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">

      <div
        *ngFor="let p of periods"
        class="period-card group"
      >
        <div class="flex justify-between items-start mb-4">
          <div>
            <h3 class="text-xl font-bold text-gray-900 group-hover:text-blue-700 transition">
              {{ p.restaurant_name }}
            </h3>
            <p class="text-gray-500 text-sm mt-1">
              ğŸ¬ {{ p.cdn_restaurant_name }}
            </p>
          </div>

          <span
            class="status-badge"
            [ngClass]="{
              'status-open': p.status_name === 'Iniciado',
              'status-closed': p.status_name === 'Cerrado'
            }"
          >
            {{ p.status_name }}
          </span>
        </div>

        <div class="border-t border-blue-100 my-4"></div>

        <div class="space-y-3">
          <div>
            <p class="text-xs font-bold text-blue-600">ğŸ“… Inicio</p>
            <p class="text-base text-gray-800 font-semibold">{{ formatDate(p.start_date) }}</p>
          </div>

          <div>
            <p class="text-xs font-bold text-red-600">â±ï¸ Fin</p>
            <p class="text-base text-gray-800 font-semibold">{{ formatDate(p.final_date) }}</p>
          </div>
        </div>

      </div>
    </div>
  </div>

</div>
